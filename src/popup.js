(function (global) {    var doc = global.document;    function populateJobInfo() {        var passedJobs = [];        var failedJobs = [];        var claimedJobs = [];        var jobs = JSON.parse(localStorage.getItem('lastJenkinsRequestData') || '[]');        if (!jobs || jobs.length === 0) {            doc.getElementById('jobResults').innerHTML = 'Unable to load jobs! :(';        }        for (var i = 0; i < jobs.length; i++) {            if (jobs[i].color === "blue" || jobs[i].color === "blue_anime") {                passedJobs.push(jobs[i]);            } else if (jobs[i].color === "red" || jobs[i].color === "red_anime") {                failedJobs.push(jobs[i]);            } else if (jobs[i].color === "yellow" || jobs[i].color === "yellow_anime") {                claimedJobs.push(jobs[i]);            }        }        drawStatus({            jobs: passedJobs,            fieldsetId: 'greenJobs',            holderId: 'greenJobsHolder'        });        drawStatus({            jobs: failedJobs,            fieldsetId: 'redJobs',            holderId: 'redJobsHolder'        });        drawStatus({            jobs: claimedJobs,            fieldsetId: 'yellowJobs',            holderId: 'yellowJobsHolder'        });    }    function drawStatus(data) {        var html = '';        if (data.jobs.length === 0) {            doc.getElementById(data.fieldsetId).style.display = 'none';        } else {            for (var i = 0; i < data.jobs.length; i++) {                html += '<a' + (data.jobs[i].color.indexOf('_anime') > 0 ? ' class="activeJob"' : '') + ' href="' + data.jobs[i].url + '" target="_blank">' + data.jobs[i].name + '</a><br />';            }            doc.getElementById(data.holderId).innerHTML = html;        }    }    function assignEvents() {        doc.getElementById('refreshResults').onclick = function () {            chrome.runtime.getBackgroundPage(function (backgroundPage) {                backgroundPage.requestNewDataNow();            });        }    }    doc.addEventListener('DOMContentLoaded', function () {        populateJobInfo();        assignEvents();    });})(this);